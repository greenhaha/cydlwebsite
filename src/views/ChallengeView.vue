<template>
  <div class="challenge-page">
    <!-- ä¸“å±èƒŒæ™¯ -->
    <div class="fixed inset-0 w-full h-full">
      <div class="absolute inset-0 bg-cover bg-center bg-no-repeat" 
           style="background-image: url('https://greenhaha.oss-cn-beijing.aliyuncs.com/frontend/assets/image/bg3.webp')">
      </div>
    </div>

    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <div class="challenge-content inset-0 h-full top-[0px] z-10 flex flex-col items-center justify-start pt-[80px] pb-8">
      <!-- é¡¶éƒ¨å¯¼èˆª -->
      <div class="fixed top-0 left-0 right-0 z-30 bg-black/60 backdrop-blur-md border-b border-white/20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3">
          <RouterLink 
            to="/"
            class="inline-flex items-center px-4 py-2 text-white/90 hover:text-white transition-colors duration-200 rounded-lg hover:bg-white/20 bg-black/30"
          >
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
            </svg>
            è¿”å›ä¸»é¡µ
          </RouterLink>
        </div>
      </div>

      <!-- å¤§æ°”æ ‡é¢˜è®¾è®¡ -->
      <div class="page-header w-full max-w-[1280px] px-4 mb-8 z-20 text-center">
        <!-- èƒŒæ™¯è£…é¥° -->
        <div class="relative mb-8">
          
          <!-- ä¸»æ ‡é¢˜å®¹å™¨ -->
          <div class="relative z-10">
            <!-- é¡¶éƒ¨è£…é¥°çº¿ -->
            <div class="flex items-center justify-center mb-6">
              <div class="h-px bg-gradient-to-r from-transparent via-white/40 to-transparent w-24"></div>
              <div class="mx-3 w-2 h-2 bg-white/60 rounded-full"></div>
              <div class="h-px bg-gradient-to-r from-transparent via-white/40 to-transparent w-24"></div>
            </div>
            
            <!-- ä¸»æ ‡é¢˜ -->
            <div class="mb-4 relative text-center">
              <h1 class="text-[36px] md:text-[48px] lg:text-[56px] font-black text-white mb-3 tracking-tight leading-none drop-shadow-2xl text-shadow-lg">
                å…¨æœæŒ‘æˆ˜
              </h1>
            </div>
            
            <!-- å‰¯æ ‡é¢˜ -->
            <h2 class="text-[16px] md:text-[20px] lg:text-[24px] font-medium text-white/95 mb-6 tracking-wide text-center drop-shadow-lg text-shadow">
              æºæ‰‹å¹¶è¿› Â· å…±åˆ›è¾‰ç…Œ Â· è§è¯è£è€€
            </h2>
            
            <!-- åº•éƒ¨è£…é¥°çº¿ -->
            <div class="flex items-center justify-center">
              <div class="h-px bg-gradient-to-r from-transparent via-white/40 to-transparent w-32"></div>
              <div class="mx-3 w-1.5 h-1.5 bg-white/60 rounded-full"></div>
              <div class="h-px bg-gradient-to-r from-transparent via-white/40 to-transparent w-32"></div>
            </div>
          </div>
        </div>
        
        <!-- æè¿°æ–‡å­— -->
        <div class="backdrop-blur-lg !m-4 bg-black/50 rounded-lg p-4 border border-white/30 shadow-2xl">
          <p class="text-[14px] md:text-[16px] text-white leading-relaxed w-full text-center mx-auto text-center drop-shadow-lg text-shadow">
            è§è¯é»„ç²±ä¸€æ¢¦ç¤¾åŒºçš„é›†ä½“åŠ›é‡ï¼Œä¸€èµ·å®Œæˆå²è¯—çº§æŒ‘æˆ˜ï¼
          </p>
        </div>
      </div>

      <!-- å¿«æ·æŒ‰é’®åŒºåŸŸ -->
      <div class="actions-section w-full max-w-[800px] px-4 !mb-8 z-20">
        <div class="flex flex-col sm:flex-row gap-3 justify-center items-center">
          <button 
            @click="refreshStats"
            class="inline-flex items-center px-6 py-3 backdrop-blur-lg bg-black/40 border border-white/30 text-white text-base font-medium rounded-lg transition-all duration-300 hover:scale-105 shadow-xl text-shadow"
          >
            <span class="mr-2 text-lg">ğŸ“Š</span>
            åˆ·æ–°æ•°æ®
          </button>
          <RouterLink 
            to="/anniversary"
            class="inline-flex items-center px-6 py-3 backdrop-blur-lg bg-black/40 border border-white/30 text-white text-base font-medium rounded-lg transition-all duration-300 hover:scale-105 shadow-xl text-shadow"
          >
            <span class="mr-2 text-lg">ğŸ‰</span>
            æŸ¥çœ‹å‘¨å¹´åº†
          </RouterLink>
        </div>
      </div>

      <!-- æŒ‘æˆ˜è¿›åº¦åŒºåŸŸ -->
      <div class="stats-section w-full max-w-[800px] px-4 mb-8 z-20 text-center">
        <div class="text-center !mb-6">
          <h3 class="text-[20px] md:text-[24px] font-bold text-white mb-2 text-shadow-lg drop-shadow-lg">
            æŒ‘æˆ˜è¿›åº¦
          </h3>
          <p class="text-[14px] md:text-[16px] text-white/95 w-full text-center mx-auto text-shadow drop-shadow">
            å…¨æœç©å®¶å…±åŒåŠªåŠ›çš„æˆæœ
          </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 !mb-6">
          <div class="stat-card p-4 rounded-lg backdrop-blur-lg bg-black/40 border border-white/30 text-center shadow-xl">
            <div class="text-2xl mb-2">â°</div>
            <div class="text-xl font-bold text-white mb-1 text-shadow-lg">{{ challengeTime }}</div>
            <div class="text-white/90 text-sm text-shadow">æŒ‘æˆ˜æ€»æ—¶é•¿</div>
          </div>
          
          <div class="stat-card p-4 rounded-lg backdrop-blur-lg bg-black/40 border border-white/30 text-center shadow-xl">
            <div class="text-2xl mb-2">ğŸ‘¥</div>
            <div class="text-xl font-bold text-white mb-1 text-shadow-lg">{{ participants }}</div>
            <div class="text-white/90 text-sm text-shadow">å‚ä¸ç©å®¶æ•°</div>
          </div>
          
          <div class="stat-card p-4 rounded-lg backdrop-blur-lg bg-black/40 border border-white/30 text-center shadow-xl">
            <div class="text-2xl mb-2">ğŸ¯</div>
            <div class="text-xl font-bold text-white mb-1 text-shadow-lg">{{ completionRate }}%</div>
            <div class="text-white/90 text-sm text-shadow">æŒ‘æˆ˜å®Œæˆåº¦</div>
          </div>
        </div>
      </div>

      <!-- æ’è¡Œæ¦œåŒºåŸŸ -->
      <div class="leaderboard-section w-full max-w-[800px] px-4 !mb-8 z-20 text-center">
        <div class="text-center !mb-6">
          <h3 class="text-[20px] md:text-[24px] font-bold text-white !mb-2 text-shadow-lg drop-shadow-lg">
            è£èª‰æ’è¡Œæ¦œ
          </h3>
          <p class="text-[14px] md:text-[16px] text-white/95 w-full text-center mx-auto text-shadow drop-shadow">
            è‡´æ•¬æ¯ä¸€ä½è‹±é›„
          </p>
        </div>

        <div class="backdrop-blur-lg bg-black/40 rounded-lg border border-white/30 p-4 shadow-xl">
          <div class="space-y-3">
            <div v-for="(player, index) in topPlayers" :key="index" 
                 class="flex items-center justify-between p-3 rounded-lg bg-black/30 hover:bg-black/40 transition-colors duration-200 border border-white/20 !mb-4">
              <div class="flex items-center space-x-3">
                <div class="text-lg">{{ getRankEmoji(index) }}</div>
                <div>
                  <div class="font-bold text-white text-sm text-shadow">{{ player.name }}</div>
                  <div class="text-white/90 text-xs text-shadow">è´¡çŒ®å€¼: {{ player.contribution }}</div>
                </div>
              </div>
              <div class="text-right">
                <div class="text-base font-bold text-yellow-300 text-shadow-lg">{{ player.score }}</div>
                <div class="text-xs text-white/90 text-shadow">ç§¯åˆ†</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- åº•éƒ¨ä¿¡æ¯æ  -->
      <div class="footer-info w-full max-w-[600px] px-4 z-20">
        <div class="text-center p-4 rounded-lg backdrop-blur-lg bg-black/50 border border-white/30 shadow-xl">
          <p class="text-white text-sm mb-1 text-center text-shadow drop-shadow">
            ğŸš€ å›¢ç»“å°±æ˜¯åŠ›é‡ï¼ŒæŒ‘æˆ˜æ°¸æ— æ­¢å¢ƒ ğŸš€
          </p>
          <p class="text-white/90 text-xs text-center text-shadow">
            æ¯ä¸ªäººçš„åŠªåŠ›éƒ½æ˜¯å‘èƒœåˆ©è¿ˆè¿›çš„ä¸€æ­¥ï¼
          </p>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue'
import { RouterLink } from 'vue-router'

// å“åº”å¼æ•°æ®
const challengeTime = ref('72å°æ—¶')
const participants = ref(1234)
const completionRate = ref(78)

// æ’è¡Œæ¦œæ•°æ®
const topPlayers = ref([
  { name: 'ä¼ å¥‡ç‹™å‡»æ‰‹', contribution: 'å®Œæˆä¸»çº¿ä»»åŠ¡', score: 1250 },
  { name: 'é’¢é“æˆ˜å£«', contribution: 'å‡»è´¥Boss', score: 1180 },
  { name: 'å½±å­åˆºå®¢', contribution: 'æ”¶é›†ç¨€æœ‰é“å…·', score: 1095 },
  { name: 'ç«ç„°æ³•å¸ˆ', contribution: 'å›¢é˜Ÿåä½œ', score: 980 },
  { name: 'åœ£å…‰éª‘å£«', contribution: 'å¸®åŠ©æ–°æ‰‹', score: 876 }
])

// åˆ·æ–°ç»Ÿè®¡æ•°æ®
const refreshStats = () => {
  // æ¨¡æ‹Ÿæ•°æ®åˆ·æ–°
  participants.value = Math.floor(Math.random() * 2000) + 1000
  completionRate.value = Math.floor(Math.random() * 30) + 70
}

// è·å–æ’åè¡¨æƒ…
const getRankEmoji = (index: number) => {
  const emojis = ['ğŸ¥‡', 'ğŸ¥ˆ', 'ğŸ¥‰', 'ğŸ…', 'â­']
  return emojis[index] || 'ğŸ…'
}

// ç»„ä»¶æŒ‚è½½æ—¶åˆå§‹åŒ–æ•°æ®
onMounted(() => {
  loadChallengeData()
})

const loadChallengeData = () => {
  // æ¨¡æ‹ŸåŠ è½½æŒ‘æˆ˜æ•°æ®
  console.log('åŠ è½½æŒ‘æˆ˜æ•°æ®...')
}
</script>

<style scoped>
.bg-gradient-radial {
  background: radial-gradient(circle, var(--tw-gradient-stops));
}

.text-shadow {
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.text-shadow-lg {
  text-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
}

.text-shadow-sm {
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

@keyframes bounce {
  0%, 20%, 53%, 80%, 100% {
    transform: translate3d(0, 0, 0);
  }
  40%, 43% {
    transform: translate3d(0, -15px, 0);
  }
  70% {
    transform: translate3d(0, -7px, 0);
  }
  90% {
    transform: translate3d(0, -2px, 0);
  }
}

.animate-bounce {
  animation: bounce 2s infinite;
}
</style>